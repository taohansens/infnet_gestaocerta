{"openapi":"3.0.1","info":{"title":"API de Arquivos","version":"v1"},"servers":[{"url":"http://localhost:8080/arq/","description":"\"Arquivos API Gateway URL\""}],"paths":{"/arquivos/{empregadoId}":{"get":{"tags":["arquivo-controller"],"summary":"Retorna uma lista de todos os arquivos enviados do empregado","operationId":"listarArquivos","parameters":[{"name":"empregadoId","in":"path","description":"ID do empregado a ser buscado","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Retorna a lista com os arquivos relacionados com o ID do empregado, vazia ou não","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ArquivoMinDTO"}}}}}}},"post":{"tags":["arquivo-controller"],"summary":"Upload de arquivo","operationId":"uploadArquivo","parameters":[{"name":"empregadoId","in":"path","description":"ID do empregado a ser vinculado ao arquivo","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"nome","in":"query","description":"Identificador do arquivo a ser salvo no Metadado","required":true,"schema":{"type":"string"}},{"name":"descricao","in":"query","description":"Descrição do arquivo a ser salvo no Metadado","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"required":["file"],"type":"object","properties":{"file":{"type":"string","description":"Arquivo de fato a ser enviado","format":"binary"}}}}}},"responses":{"404":{"description":"Empregado ID não encontrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StandardError"}}}},"201":{"description":"Arquivo enviado com sucesso.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ArquivoMinDTO"}}}},"500":{"description":"I/O Error. Erro ao enviar arquivo.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StandardError"}}}}}}},"/arquivos/{empregadoId}/{arquivoId}":{"get":{"tags":["arquivo-controller"],"summary":"Retorna o arquivo para download","operationId":"downloadArquivo","parameters":[{"name":"empregadoId","in":"path","description":"ID do empregado a ser buscado","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"arquivoId","in":"path","description":"ID do arquivo registrado","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"ID do Arquivo não encontrado no banco de dados","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StandardError"}}}}},"403":{"description":"Forbidden. Arquivo não pertence ao ID do funcionário enviado","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StandardError"}}}}},"200":{"description":"Download do arquivo","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ArquivoMinDTO"}}}}}}},"delete":{"tags":["arquivo-controller"],"summary":"Deleta arquivo pelo ID.","operationId":"deleteArquivo","parameters":[{"name":"arquivoId","in":"path","required":true,"schema":{"type":"string"}},{"name":"empregadoId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"400":{"description":"Operação não realizada, inconsistência no Banco de Dados.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StandardError"}}}},"404":{"description":"Operação não realizada, ID do Arquivo Não Encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StandardError"}}}},"204":{"description":"Arquivo deletado com sucesso."}}}}},"components":{"schemas":{"StandardError":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}}},"ArquivoMinDTO":{"type":"object","properties":{"id":{"type":"string"},"nome":{"type":"string"},"descricao":{"type":"string"},"filename":{"type":"string"},"tipoMime":{"type":"string"},"tamanho":{"type":"integer","format":"int64"}}}}}}